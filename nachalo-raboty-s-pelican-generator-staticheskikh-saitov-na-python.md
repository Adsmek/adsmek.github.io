Title: Начало работы с Pelican: генератор статических сайтов на Python
date: 2020-08-06
modified: 2020-08-06
tags: перевод
category:
slug: 
author: Крейг Себеник
summary: Pelican - отличный выбор для пользователей Python, которые хотят самостоятельно разместить простой веб-сайт или блог. Как разработчик программного обеспечения, я предпочитаю управлять своим собственным сервером и сохранять больше свободы в работе моего веб-сайта.


#[Начало работы с Pelican: генератор статических сайтов на Python (en 2019-01-07)](https://opensource.com/article/19/1/getting-started-pelican)
'перевод'

Если вы хотите создать собственный веб-сайт или блог, у вас есть много вариантов. Многие провайдеры разместят ваш веб-сайт и сделают за вас большую часть работы. (WordPress - чрезвычайно популярный вариант.) Но вы теряете некоторую гибкость, используя размещенное решение. Как разработчик программного обеспечения, я предпочитаю управлять своим собственным сервером и сохранять больше свободы в работе моего веб-сайта.

Однако управление веб-сервером - это довольно трудоемкий процесс. Установить его и получить простое приложение для обслуживания контента достаточно просто. Но отслеживание исправлений и обновлений системы безопасности занимает очень много времени. Если вы просто хотите обслуживать статические веб-страницы, наличие веб-сервера и множества приложений может потребовать больше усилий, чем оно того стоит. Создание HTML-страниц вручную - тоже не лучший вариант.

Здесь может пригодиться генератор статических сайтов. Эти приложения используют шаблоны для создания всех нужных статических страниц и перекрестных ссылок на них со связанными метаданными. (например, отображение всех страниц с общим тегом или ключевым словом). Генераторы статических сайтов помогают создать сайт с общим внешним видом, используя такие элементы, как области навигации, верхний и нижний колонтитулы.

Я использую  [Python](https://opensource.com/resources/python)  уже много лет. Итак, когда я впервые начал искать что-то для создания статических HTML-страниц, мне захотелось что-то написанное на Python. Основная причина в том, что я часто хочу заглянуть внутрь того, как работает приложение, и использование языка, который я уже знаю, облегчает это. (Если для вас это не важно или вы не используете Python, есть еще несколько отличных  [генераторов статических сайтов,](https://opensource.com/sitewide-search?search_api_views_fulltext=static%20site%20generator)  которые используют Ruby, JavaScript и другие языки.)

Я решил попробовать  [Пеликан](http://docs.getpelican.com/en/stable/)  . Это часто используемый генератор статических сайтов, написанный на Python. Он напрямую поддерживает  [reStructuredText](http://docutils.sourceforge.net/rst.html)  и может поддерживать  [Markdown](https://daringfireball.net/projects/markdown/)  при установке необходимого пакета. Все задачи выполняются с помощью инструментов интерфейса командной строки (CLI), что упрощает задачу для всех, кто знаком с командной строкой. А его простой инструмент CLI для быстрого старта делает создание веб-сайта чрезвычайно простым.

В этой статье я объясню, как установить Pelican 4, добавить статью и изменить тему по умолчанию. (Примечание: все это было разработано для MacOS; оно должно работать одинаково с любым вариантом Unix / Linux, но у меня нет хоста Windows для тестирования.)

## Установка и настройка

Первый шаг - создать  [виртуальный сервер](https://virtualenv.pypa.io/en/latest/)  и установить Pelican.

    $ mkdir test-site  
    $ cd test-site  
    $ python3 -m venv venv  
    $ ./venv/bin/pip install --upgrade pip  
    ...  
    Успешно установлен pip-18.1  
    $ ./venv/bin/pip install pelican  
    Сборка пеликанов  
    . ..  
    Успешно установлен MarkupSafe-1.1.0 blinker-1.4 Docutils-0.14 feedgenerator-1.9 jinja2-2.10 pelican-4.0.1 pygments-2.3.1 python-dateutil-2.7.5 pytz-2018.7 six-1.12.0 unidecode-1.0. 23

Для простоты я ввел значения для заголовка и автора и ответил N на префикс URL и разбивку на страницы. (Для остальных вопросов я использовал значение по умолчанию.)

Инструмент CLI для быстрого старта Pelican создаст базовый макет и несколько файлов, чтобы вы начали. Запустите команду  **pelican-quickstart**  . Для простоты я ввел значения для  **заголовка**  и  **автора**  и ответил  **N**  на префикс URL и разбивку на страницы. Позже эти настройки очень легко изменить в файле конфигурации.

    $ ./venv/bin/pelican-quickstart  
    Добро пожаловать в pelican-quickstart v4.0.1.  

  
Этот скрипт поможет вам создать новый веб-сайт на основе Пеликана.  
  
Пожалуйста, ответьте на следующие вопросы, чтобы этот сценарий мог сгенерировать файлы, необходимые Pelican.  
  
> Где вы хотите создать свой новый веб-сайт? [.]  
> Как будет называться этот веб-сайт? Мой тестовый блог  
> Кто будет автором этого веб-сайта? Крейг  
> Какой язык будет по умолчанию на этом веб-сайте? [en]  
> Вы хотите указать префикс URL? например, https://example.com (Y / n) n  
> Вы хотите включить разбивку на страницы? (Y / n) n  
> Какой у вас часовой пояс? [Europe / Paris]  
> Хотите создать файл tasks.py/Makefile для автоматизации создания и публикации? (Y / N)  
> Вы хотите загрузить свой сайт через FTP? (да / нет)  
> Вы хотите загрузить свой сайт с помощью SSH? (да / Нет)  
> Вы хотите загрузить свой веб-сайт с помощью Dropbox? (да / нет)  
> Вы хотите загрузить свой веб-сайт с помощью S3? (да / Нет)  
> Вы хотите загрузить свой веб-сайт с помощью Rackspace Cloud Files? (Да / Нет)  
> Вы хотите загрузить свой сайт с помощью GitHub Pages? (да / нет)  
Готово. Ваш новый проект доступен по адресу / Users / craig / tmp / pelican / test-site

Все файлы, необходимые для начала работы, готовы к работе.

По умолчанию в быстром запуске используется часовой пояс Европа / Париж, поэтому измените его, прежде чем продолжить. Откройте файл  **pelicanconf.py**  в своем любимом текстовом редакторе. Найдите переменную  **TIMEZONE**  .

```
TIMEZONE = 'Europe/Paris'
```

Измените его на  **UTC**  .

```
TIMEZONE = 'UTC'
```

Чтобы обновить социальные настройки, найдите переменную  **SOCIAL**  в  **файле pelicanconf.py**  .

SOCIAL = ( ( 'Вы можете добавить ссылки в свой файл конфигурации' , '#' ) ,  
( 'Другая социальная ссылка' , '#' ) , )

Я добавлю ссылку на свою учетную запись Twitter.

```
SOCIAL = (('Twitter (#craigs55)', 'https://twitter.com/craigs55'),)
```

Обратите внимание на конечную запятую - это важно. Эта запятая помогает Python распознать, что переменная на самом деле является набором. Убедитесь, что вы не удалили эту запятую.

Теперь у вас есть основы работы с сайтом. В ходе быстрого старта был создан Makefile с несколькими целями. Предоставление цели  **devserver**  для  **make**  запустит сервер разработки на вашем компьютере, чтобы вы могли все предварительно просмотреть. Команды CLI , используемые в Makefile считаются частью вашего окружения  **PATH**  , так что вам нужно  **активировать**  в  **virtualenv**  первым.

    $ source ./venv/bin/activate  
    $ make devserver pelican -lr  
    / Users / craig / tmp / pelican / test- site / content o  
    / Users / craig / tmp / pelican / test- site / output -s / Users / craig / tmp / пеликан / тестовый сайт / pelicanconf. py  

  

    Изменено: тема , настройки. не регенерирующее ...  
    ВНИМАНИЕ : Не действительных файлов , найденных в содержании для активных читателей:  
    | BaseReader ( статический )  
    | HTMLReader ( htm , html )  
    | RstReader (rst )  
    Готово: обработано 0 статей , 0 черновиков , 0 страниц , 0 скрытых страниц и 0 черновиков за 0,18 секунды.

Укажите в своем любимом браузере  [http: // localhost: 8000,](http://localhost:8000/)  чтобы просмотреть простой тестовый блог.

## [pelican_test-site1.png](https://html-cleaner.com/file/417761)

![Пеликан испытательный полигон 1](https://opensource.com/sites/default/files/uploads/pelican_test-site1.png "Пеликан испытательный полигон 1")

Вы можете увидеть ссылку Twitter справа и несколько ссылок на Pelican, Python и Jinja слева от нее. (Jinja - отличный язык шаблонов, который может использовать Pelican. Подробнее о нем можно узнать в  [документации Jinja](http://jinja.pocoo.org/docs/2.10/)  .)

## Добавление контента

Теперь, когда у вас есть базовый сайт, добавьте немного контента. Сначала добавьте файл с именем  **welcome.rst**  в каталог  **содержимого**  сайта . В вашем любимом текстовом редакторе создайте файл со следующим текстом:

    $ pwd  
    / Users / craig / tmp / pelican / test-site  
    $ cat content / welcome.rst  

  

    Добро пожаловать в мой блог!  
    ###################  
      
    : дата: 20181216 08:30  
    : теги: добро пожаловать  
    : категория: Введение  
    : slug: добро пожаловать  
    : автор: Крейг  
    : резюме: приветственный документ  
      
    Добро пожаловать в мой блог.  
    Это короткая страница, чтобы показать, как создать статическую страницу.

Строки метаданных - дата, теги и т. Д. - автоматически анализируются Pelican.

После того, как вы напишете файл,  **сервер разработчика**  должен вывести что-то вроде этого:

-> Изменено: содержание. регенерация ...  
Готово: обработано 1 статья, 0 черновиков, 0 страниц, 0 скрытых страниц и 0 черновиков за 0,10 секунды.

Перезагрузите тестовый сайт в браузере, чтобы увидеть изменения.

## [pelican_test-site2.png](https://html-cleaner.com/file/417766)

![Пеликан полигон 2](https://opensource.com/sites/default/files/uploads/pelican_test-site2.png "Пеликан полигон 2")

Метаданные (например, дата и теги) были автоматически добавлены на страницу. Кроме того, Пеликан автоматически определил категорию  **вступления**  и добавил раздел в верхнюю навигацию.

## Изменить тему

Одна из самых приятных сторон работы с популярным программным обеспечением с открытым исходным кодом, таким как Pelican, заключается в том, что многие пользователи вносят изменения и вносят их обратно в проект. Многие материалы представлены в форме тем.

Тема сайта устанавливает цвета, параметры макета и т. Д. Новые темы действительно легко опробовать. Вы можете предварительно просмотреть многие из них на  [Pelican Themes](http://www.pelicanthemes.com/)  .

Сначала клонируйте репозиторий GitHub:

    $ cd ..  
    $ git clone --recursive https://github.com/getpelican/pelicanthemes  

Клонирование в «пеликантемы» ...

Так как мне нравится синий цвет, попробую  [blueidea](https://github.com/nasskach/pelican-blueidea/tree/58fb13112a2707baa7d65075517c40439ab95c0a)  .

Отредактируйте  **файл pelicanconf.py**  и добавьте следующую строку:

```
THEME = '/Users/craig/tmp/pelican/pelican-themes/blueidea/'
```

**Devserver**  восстановит свой выход. Перезагрузите веб-страницу в браузере, чтобы увидеть новую тему.

 [pelican_test-site3.png](https://html-cleaner.com/file/417771)

![Пеликан испытательный полигон 3](https://opensource.com/sites/default/files/uploads/pelican_test-site3.png "Пеликан испытательный полигон 3")

Тема контролирует многие аспекты макета. Например, в теме по умолчанию вы можете увидеть категорию (Intro) с метатегами рядом со статьей. Но эта категория не отображается в теме blueidea.

## Прочие соображения

Это было довольно быстрое знакомство с Пеликаном. Есть пара важных тем, которые я не затронул.

Во-первых, одна из причин, по которой я не решался перейти на статический сайт, заключалась в том, что он не позволял обсуждать статьи. К счастью, есть сторонние поставщики, которые проведут для вас обсуждения. Я сейчас смотрю на  [Disqus](https://disqus.com/)  .

Затем все вышеперечисленное было сделано на моей локальной машине. Если я хочу, чтобы другие видели мой сайт, мне придется куда-нибудь загрузить предварительно сгенерированные файлы HTML. Если вы посмотрите на вывод  **pelican-quickstart**  , вы увидите варианты использования FTP, SSH, S3 и даже GitHub Pages. У каждого варианта есть свои плюсы и минусы. Но, если бы мне пришлось выбрать один, я бы, вероятно, опубликовал его на страницах GitHub.

У Пеликана есть много других функций - я все еще узнаю о нем больше каждый день. Если вы хотите самостоятельно разместить веб-сайт или блог с простым статическим контентом и хотите использовать Python, Pelican - отличный выбор. У него есть активное сообщество пользователей, которое исправляет ошибки, добавляет функции и создает новые интересные темы. Попробуйте!
